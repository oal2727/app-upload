(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{104:function(e,t,a){},113:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),s=a(24),i=a.n(s),o=(a(78),a(7)),l=a.n(o),d=a(17),j=a(16),u=a(40),b=a(36),p=a(21),m=a(56),O=a(8),h=a(9),x=a(48),g=function(e){var t=e.component,a=Object(x.a)(e,["component"]);return Object(n.jsx)(O.b,Object(h.a)(Object(h.a)({},a),{},{render:function(e){return Object(n.jsx)(t,Object(h.a)({},e))}}))},f=a(34),v=a.n(f),y=function(){return!!v.a.get("token")},N=function(e){var t=e.component,a=Object(x.a)(e,["component"]);return Object(n.jsx)(O.b,Object(h.a)(Object(h.a)({},a),{},{render:function(e){return y()?Object(n.jsx)(t,Object(h.a)({},e)):Object(n.jsx)(O.a,{path:"/"})}}))},E=a(42),T=function(e){var t=e.type,a=e.variant,r=e.children,c=e.onClick;return Object(n.jsx)(E.a,{type:t,onClick:c,style:{display:"flex",margin:"auto"},variant:a,children:r})},A=a(50),I=function(e){var t=e.type,a=e.placeholder,r=e.register,c=e.required,s=e.label,i=e.name;return Object(n.jsxs)(A.a.Group,{style:{marginTop:10},children:[Object(n.jsx)(A.a.Label,{children:s}),Object(n.jsx)(A.a.Control,{type:t,name:i,ref:r({required:c}),placeholder:a})]})},_=a(69),S=a.n(_),k=function(e){var t=e.responseGoogle;return Object(n.jsx)(S.a,{style:{display:"flex",margin:"auto"},clientId:"1037183058645-jhrrj7bphmq728pgqgdaih45r8435907.apps.googleusercontent.com",buttonText:"Login",onSuccess:t,onFailure:t,cookiePolicy:"single_host_origin"})},w=a(57),L=function(e){var t=e.children;return Object(n.jsx)("div",{style:{marginTop:30},children:Object(n.jsx)(w.a,{className:"card_social",children:Object(n.jsx)(w.a.Body,{children:t})})})},C=a(33),q=a(70),D=a.n(q).a.create({baseURL:"http://localhost:4000/api"}),G=function(){var e=v.a.get("token");return e&&(D.defaults.headers.common.Authorization="Bearer ".concat(e)),D},R=function(e,t){return G().post("/".concat(e),t)},P=function(e){return G().post("/register",e)},U=function(e){return G().post("/login",e)},F=function(){return G().get("/dashboard")},M=a(19),B=function(){var e=Object(C.a)(),t=e.register,a=e.handleSubmit,r=e.errors,c=function(){var e=Object(d.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t,v.a.set("token",a),window.location.href="/Dashboard";case 2:case"end":return e.stop()}var a}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.jsx)(L,{children:Object(n.jsxs)("form",{onSubmit:a((function(e){U(e).then((function(e){c(e.data.token,"Login Sucessfull")})).catch((function(e){M.a.error(e.response.data.error)}))})),children:[Object(n.jsx)(I,{label:"Email",register:t,name:"email",placeholder:"Input Email",type:"email",required:!0}),Object(n.jsxs)("p",{className:"text-danger",children:[" ",r.email&&"*email  is required"]}),Object(n.jsx)(I,{label:"Password",register:t,name:"password",placeholder:"Input Password",type:"password",required:!0}),Object(n.jsxs)("p",{className:"text-danger",children:[" ",r.password&&"*Password  is required"]}),Object(n.jsx)(T,{type:"submit",variant:"primary",children:"Log In"}),Object(n.jsx)(k,{responseGoogle:function(e){R("google",{tokenId:e.tokenId}).then((function(e){c(e.data.token)})).catch((function(e){M.a.error(e.response.data.error)}))}})]})})},H=function(){var e=Object(C.a)(),t=e.register,a=e.handleSubmit,r=e.errors,c=e.reset,s=Object(O.g)();return Object(n.jsx)(L,{children:Object(n.jsxs)("form",{onSubmit:a((function(e){P(e).then((function(e){M.a.success("Register Sucessfull"),s.push("/Login"),c()})).catch((function(e){M.a.error(e.response.data.error)}))})),children:[Object(n.jsx)(I,{label:"First Name",name:"firstName",placeholder:"Input First Name",register:t,type:"text",required:!0}),Object(n.jsxs)("p",{className:"text-danger",children:[" ",r.firstName&&"*firstName  is required"]}),Object(n.jsx)(I,{label:"Last Name",register:t,name:"lastName",placeholder:"Input Last Name",type:"text",required:!0}),Object(n.jsxs)("p",{className:"text-danger",children:[" ",r.lastName&&"*lastName  is required"]}),Object(n.jsx)(I,{label:"Email",register:t,name:"email",placeholder:"Input Email",type:"email",required:!0}),Object(n.jsxs)("p",{className:"text-danger",children:[" ",r.email&&"*Email  is required"]}),Object(n.jsx)(I,{label:"Password",register:t,name:"password",placeholder:"Input Password",type:"password",required:!0}),Object(n.jsxs)("p",{className:"text-danger",children:[" ",r.password&&"*Password  is required"]}),Object(n.jsx)(T,{type:"submit",variant:"success",children:"Register"})]})})},z=a(10),J=function(e,t){switch(t.type){case"TOOGLE_AUTHENTICATED":return Object(h.a)(Object(h.a)({},e),{},{authenticated:t.payload});case"USER_AUTHENTICATED":return Object(h.a)(Object(h.a)({},e),{},{userAuthneticated:{firstName:t.payload.firstName,lastName:t.payload.lastName,email:t.payload.email,id:t.payload._id}});case"TOOGLE_SPINNER":return Object(h.a)(Object(h.a)({},e),{},{spinner:t.payload});case"SET_IMAGES":return Object(h.a)(Object(h.a)({},e),{},{imagenes:t.payload});case"DELETE_IMAGEN":var a=e.imagenes.filter((function(e){return e._id!==t.payload}));return Object(h.a)(Object(h.a)({},e),{},{imagenes:a});case"ADD_IMAGEN":return Object(h.a)(Object(h.a)({},e),{},{imagenes:[].concat(Object(z.a)(e.imagenes),[t.payload])});default:return e}},K=Object(r.createContext)(),Q=function(e){var t=e.children,a=Object(r.useReducer)(J,{open:!1,authenticated:!1,spinner:!1,userAuthneticated:{firstName:"",lastName:"",email:"",id:""},imagenes:[]}),c=Object(j.a)(a,2),s={state:c[0],dispatch:c[1]};return Object(n.jsx)(K.Provider,{value:s,children:t})},V=function(){return G().get("/image")},W=function(e){return G().post("/sendimage",e)},X=function(e){return G().delete("/image/".concat(e))},Y=(a(104),a(71)),Z=function(e){var t=e.title,a=e.image,r=e.id,s=e.created_at,i=c.a.useContext(K).dispatch;return Object(n.jsxs)("div",{className:"card-image",children:[Object(n.jsx)("img",{className:"image_card",src:a,alt:""}),Object(n.jsx)("div",{className:"box-trash",onClick:function(){return function(e){X(e).then((function(e){i({type:"DELETE_IMAGEN",payload:e.data._id})}))}(r)},children:Object(n.jsx)("i",{id:"trash_icon",className:"fas fa-trash"})}),Object(n.jsxs)("div",{className:"card-image-body",children:[Object(n.jsx)("p",{className:"time_upload",children:Object(Y.format)(s)}),Object(n.jsx)("span",{className:"title_card",children:t})]})]})},$=a.p+"static/media/upload_image.6b3755ce.png",ee=function(){var e=c.a.useContext(K),t=e.state,a=e.dispatch,s=c.a.useState(null),i=Object(j.a)(s,2),o=i[0],l=i[1],d=c.a.useState(null),u=Object(j.a)(d,2),b=u[0],p=u[1],m=Object(C.a)(),O=m.register,h=m.handleSubmit,x=m.errors,g=m.reset;Object(r.useEffect)((function(){V().then((function(e){a({type:"SET_IMAGES",payload:e.data})}))}),[]);var f=c.a.useRef();return Object(n.jsxs)("div",{children:[Object(n.jsx)(L,{children:Object(n.jsxs)("div",{className:"box_social",children:[Object(n.jsxs)("div",{className:"box-image",children:[null===o?Object(n.jsx)("img",{className:"image",src:$,alt:""}):Object(n.jsx)("img",{className:"image",src:o,alt:""}),Object(n.jsx)("i",{id:"camera_image",onClick:function(){f.current.click()},className:"fas fa-camera"}),Object(n.jsx)("input",{type:"file",ref:f,onChange:function(e){var t=e.target.files[0];p(t);var a=new FileReader;a.onload=function(e){l(e.target.result)},a.readAsDataURL(t)},name:"imagen",style:{display:"none"}})]}),Object(n.jsxs)("form",{onSubmit:h((function(e,t){if(null===b)return M.a.error("No hay archivo integrado");if("image/jpeg"!==b.type)return M.a.error("Solo se permite imagenes con extension jpeg");if(b.size<=2e4)return M.a.error("Solo se permite imagenes con extension jpeg");var n=new FormData;g(),n.append("image",b),n.append("title",e.title),W(n).then((function(e){a({type:"ADD_IMAGEN",payload:e.data}),l(null),p(null),t.target.reset()}))})),children:[Object(n.jsx)(I,{label:"Title Image",register:O,name:"title",placeholder:"Input Title for Image",type:"text",required:!0}),Object(n.jsx)("div",{children:Object(n.jsxs)("p",{className:"text-danger",children:[" ",x.title&&"*Title  is required"]})}),Object(n.jsx)("div",{children:Object(n.jsx)(T,{type:"submit",variant:"success",children:"Save"})})]})]})}),Object(n.jsx)("div",{className:"box-grid",children:t.imagenes.map((function(e,t){return Object(n.jsx)(Z,{title:e.title,id:e._id,created_at:e.createdAt,image:e.imageUrl},t)}))})]})},te=function(){return Object(n.jsxs)(O.d,{children:[Object(n.jsx)(g,{component:B,path:"/",exact:!0}),Object(n.jsx)(g,{component:B,path:"/Login"}),Object(n.jsx)(g,{component:H,path:"/Register"}),Object(n.jsx)(N,{component:ee,path:"/Dashboard"})]})},ae=a(72),ne=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),a=t[0],s=t[1],i=c.a.useContext(K),o=i.state,O=i.dispatch;Object(r.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y()){e.next=7;break}return e.next=3,F();case 3:(t=e.sent)?(s(t.data.firstName+" "+t.data.lastName),O({type:"TOOGLE_AUTHENTICATED",payload:!0}),O({type:"USER_AUTHENTICATED",payload:t.data})):s(""),e.next=7;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var h=function(){s("User"),v.a.remove("token"),O({type:"TOOGLE_AUTHENTICATED",payload:!1})};return Object(n.jsx)("div",{children:o.spinner?Object(n.jsx)("div",{style:{marginTop:50},children:Object(n.jsx)(ae.a,{animation:"border",style:{fontSize:35},variant:"primary"})}):Object(n.jsxs)(p.a,{children:[Object(n.jsxs)(u.a,{collapseOnSelect:!0,expand:"lg",bg:"light",variant:"light",children:[Object(n.jsx)(u.a.Brand,{as:p.b,to:"/",children:"App Authentication"}),Object(n.jsx)(u.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(n.jsx)(u.a.Collapse,{id:"responsive-navbar-nav",children:o.authenticated?Object(n.jsx)(b.a,{className:"ml-auto",children:Object(n.jsx)(m.a,{title:o.userAuthneticated.firstName+" "+o.userAuthneticated.lastName,id:"collasible-nav-dropdown",children:Object(n.jsx)(m.a.Item,{onClick:function(){return h()},as:p.b,to:"/",children:"Logout"})})}):Object(n.jsxs)(b.a,{children:[Object(n.jsx)(b.a.Link,{as:p.b,to:"/Dashboard",children:"Dashboard"}),Object(n.jsx)(b.a.Link,{as:p.b,to:"/Login",children:"Login"}),Object(n.jsx)(b.a.Link,{as:p.b,to:"/Register",children:"Register"})]})})]}),Object(n.jsx)(te,{name:a})]})})};var re=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(Q,{children:Object(n.jsx)(ne,{})})})},ce=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,119)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};a(111),a(112);M.a.configure(),i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(re,{})}),document.getElementById("root")),ce()},78:function(e,t,a){}},[[113,1,2]]]);
//# sourceMappingURL=main.f8c18b54.chunk.js.map